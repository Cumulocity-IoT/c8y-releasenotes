---
weight: 50
title: Release 10.7.0
layout: redirect
---

### Apama correlator version

This release of Cumulocity IoT Streaming Analytics includes the Apama version 10.5.4 correlator.

### Changes in the Apama-ctrl manifest

The Apama-ctrl microservice manifest now includes the ROLE_USER_MANAGEMENT_READ permission, which means that all requests from EPL apps or other components within the Apama-ctrl microservice operate with this role and thus can read user details, potentially including personal identifiable information. See also [Modifying microservice permissions and resource usage](https://cumulocity.com/guides/10.7.0/apama/advanced/#microservice-permissions) and [Invoking other parts of the Cumulocity IoT REST API](https://cumulocity.com/guides/10.7.0/apama/actions/#invoking-other-api).

### Improvements in alarms generated by the Apama-ctrl microservice

The following improvements are available in this release:

* `smartrule_restore_failed`<br>
  This is a new alarm type which is raised if a corrupt smart rule is present in the inventory and the correlator therefore fails to recover it correctly during startup. See [Smart rule restore failed](https://cumulocity.com/guides/10.7.0/apama/troubleshooting/#smartrule_restore_failed) for more information.

* `apama_safe_mode`<br>
  Safe mode is now enabled when the microservice has been restarted more that 2 times in the last 20 minutes. See [Safe mode on startup](https://cumulocity.com/guides/10.7.0/apama/troubleshooting/#apama_safe_mode) for more information.

### Improvements in Apama EPL Apps

Both `Measurement` and `MeasurementFragment` events are now always available when activating an EPL app. It is no longer required to change a tenant option for this. So your apps can choose to listen for either of these, based on your requirements. The `apama.measurementFormat` tenant option from previous versions is no longer supported.

### Deprecated properties in updates

The properties describing the notification type (created or updated) which were previously provided in the `params` field of the EPL objects for managed objects, events, alarms, operations and measurements are now deprecated and will be removed in a future release. For managed objects, events, alarms and operations, a new `PARAM_NOTIFICATION` constant is now available instead. The value is the value of the `NOTIFICATION_CREATED` and `NOTIFICATION_UPDATED` constant  values. It is recommended that EPL uses the new constant values. See also [Distinguishing between update and create notifications](https://cumulocity.com/guides/10.7.0/apama/analytics-introduction/#notifications).

### Improvements in Apama Analytics Builder

The documentation for [Apama Analytics Builder](https://documentation.softwareag.com/onlinehelp/Rohan/Analytics_Builder/pab10-7-0/apama-pab-webhelp/index.html), including release notes, is available separately. For your convenience, the release notes from the above documentation are also given below:

* It is now possible to use template  models. A template model is a model in which one or more template  parameters are defined. Template parameters can be bound to any number  of block parameters, provided that the type of the block parameter is  the same as that of the template parameter.

    The following enhancements come with this new feature:

  * You can switch a block's parameter to be a template parameter and then assign a new or an existing template parameter. See [Editing the parameters of a block](https://documentation.softwareag.com/onlinehelp/Rohan/Analytics_Builder/pab10-7-0/apama-pab-webhelp/index.html#page/apamaanalyticsbuilder-webhelp%2Fta-AnaBui_editing_the_parameters_of_a_block.html) for more information.

  * A new dialog box is available for editing template parameters. See [Managing template parameters](https://documentation.softwareag.com/onlinehelp/Rohan/Analytics_Builder/pab10-7-0/apama-pab-webhelp/index.html#page/apamaanalyticsbuilder-webhelp%2Fta-AnaBui_managing_template_parameters.html) for more information.

  * A new instance editor is provided. The instance editor allows you to set  up different instances of the same model. The blocks in each instance  can then use different values for the template parameters. Each instance can be activated, deactivated, or use different run modes,  independently. See [Using the Instance Editor](https://documentation.softwareag.com/onlinehelp/Rohan/Analytics_Builder/pab10-7-0/apama-pab-webhelp/index.html#page/apamaanalyticsbuilder-webhelp%2Fto-AnaBui_using_the_instance_editor.html) for more information.

  * The model manager uses a new type of card for the template models. See [The model manager user interface](https://documentation.softwareag.com/onlinehelp/Rohan/Analytics_Builder/pab10-7-0/apama-pab-webhelp/index.html#page/apamaanalyticsbuilder-webhelp%2Fco-AnaBui_the_model_manager_user_interface.html) for more information.

     See also [Models](https://documentation.softwareag.com/onlinehelp/Rohan/Analytics_Builder/pab10-7-0/apama-pab-webhelp/index.html#page/apamaanalyticsbuilder-webhelp%2Fco-AnaBui_models.html) which explains the two types of models that can now be created: models  with template parameters and (as in previous versions) models without  template parameters. This topic also explains the relevant roles for the new type of model, which can be the same person or different persons:  the model author and the instance maintainer.

* Models can now use multiple devices in a model with the concurrency level set to more than 1. See also [Model execution for different devices](https://documentation.softwareag.com/onlinehelp/Rohan/Analytics_Builder/pab10-7-0/apama-pab-webhelp/index.html#page/apamaanalyticsbuilder-webhelp%2Fco-AnaBui_model_execution_for_different_devices.html).

* The handling of old events is more lenient now. Old events are dropped only if an event for the same timestamp or a more recent timestamp has  already been processed by the model. This means that an old event might  be processed by some models but dropped by other models. See also [Input blocks and event timing](https://documentation.softwareag.com/onlinehelp/Rohan/Analytics_Builder/pab10-7-0/apama-pab-webhelp/index.html#page/apamaanalyticsbuilder-webhelp%2Fco-AnaBui_input_blocks_and_event_timing.html).

* For slow chains, the following status information is now published within the `apama_status` parameter:

  * `user-analyticsbuilder.slowestChain.models`

  * `user-analyticsbuilder.slowestChain.delaySec`

    In addition, a message is now written to the correlator log if the slowest chain is delayed by more than 1 second. See [Monitoring periodic status](https://documentation.softwareag.com/onlinehelp/Rohan/Analytics_Builder/pab10-7-0/apama-pab-webhelp/index.html#page/apamaanalyticsbuilder-webhelp%2Fco-AnaBui_monitoring_periodic_status.html) for more information.

* Activation messages are now written to the correlator log whenever the activation of a chain is started and completed. See [Monitoring the model life-cycle](https://documentation.softwareag.com/onlinehelp/Rohan/Analytics_Builder/pab10-7-0/apama-pab-webhelp/index.html#page/apamaanalyticsbuilder-webhelp%2Fco-AnaBui_monitoring_the_model_lifecycle.html) for more information.

* The version 1 API of the Apama Analytics Builder Block SDK for input and output blocks is deprecated. See the documentation at https://github.com/SoftwareAG/apama-analytics-builder-block-sdk for information on how to migrate your custom input and output blocks to the version 2 API.

    **Important:**
  The new features for multiple devices in a model and more lenient handling  of old events are disabled if any input and output blocks using the  version 1 API of the Apama Analytics Builder Block SDK are added as extensions.

* A new topic has been added which gives new users a brief overview of how to add a simple model, and how to view its output. See [First steps: Creating your first model](https://documentation.softwareag.com/onlinehelp/Rohan/Analytics_Builder/pab10-7-0/apama-pab-webhelp/index.html#page/apamaanalyticsbuilder-webhelp%2Fco-AnaBui_first_steps.html).

* The [Block Reference](https://documentation.softwareag.com/onlinehelp/Rohan/Analytics_Builder/pab10-7-0/apama-pab-webhelp/index.html#page/apamaanalyticsbuilder-webhelp%2Fto_AnaBui_block_reference_Block_Reference.html) which is shown in the model editor is now also available from the documentation. The [Overview of all blocks](https://documentation.softwareag.com/onlinehelp/Rohan/Analytics_Builder/pab10-7-0/apama-pab-webhelp/index.html#page/apamaanalyticsbuilder-webhelp%2Fto_AnaBui_block_reference_overview_all_blocks.html) provides links to the descriptions of all the blocks in the block reference.

* Apama Analytics Builder now supports branding. This means that the branding settings as described in the *User guide* under [Branding](https://cumulocity.com/guides/10.7.0/users-guide/enterprise-edition/#branding) now also apply for Apama Analytics Builder.

* The appearance of several toolbar buttons in the model editor has changed.  Especially the following buttons look different now: the button for  changing the devices and the button for showing or hiding the grid.